---
description: æŠ€æœ¯æ ˆé€‰å‹ä¸çº¦æŸ (C++14, No Exceptions, Dependencies)
globs: HD_*/**/*.{cpp,h,hpp}, diagnostic_rules/**/*
alwaysApply: true
---

# ğŸ› ï¸ æŠ€æœ¯æ ˆè§„èŒƒ (Tech Stack Specifications)

**ç›®æ ‡**ï¼šç¡®ä¿ä»£ç åœ¨åµŒå…¥å¼ç¯å¢ƒä¸­çš„ç¨³å®šæ€§ã€å¯ç§»æ¤æ€§ä¸åˆè§„æ€§ã€‚

## ğŸš¨ æŠ€æœ¯æ ˆè‡ªæ£€æ¸…å• (Tech Stack Checklist)

åœ¨å¼•å…¥æ–°åº“æˆ–ç¼–å†™å…³é”®é€»è¾‘æ—¶ï¼Œ**MUST** æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š

- [ ] **è¯­è¨€æ ‡å‡†**ï¼šç¡®è®¤ç¼–è¯‘é…ç½®ä¸º **C++14**ï¼Œä¸”æœªä½¿ç”¨ C++17+ ç‰¹æ€§ã€‚
- [ ] **å¼‚å¸¸å®‰å…¨**ï¼šç¡®è®¤ä»£ç **æœªä½¿ç”¨** `try/catch/throw`ï¼Œä¸”èƒ½é€šè¿‡ `-fno-exceptions` ç¼–è¯‘ã€‚
- [ ] **ä¾èµ–åˆè§„**ï¼šç¡®è®¤å¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“ License å…¼å®¹ (MIT/BSD/Apache)ï¼Œ**ä¸¥ç¦ GPL**ã€‚
- [ ] **å¹³å°ä¾èµ–**ï¼šç¡®è®¤ JSON/XML è§£æä½¿ç”¨çš„æ˜¯ `platform` æä¾›çš„åº“ï¼Œè€Œéè‡ªè¡Œå¼•å…¥ `nlohmann/json`ã€‚
- [ ] **åŠ¨æ€åŠ è½½**ï¼šç¡®è®¤ RP1210 ç­‰é©±åŠ¨åº“æ˜¯é€šè¿‡ `LoadLibrary` åŠ¨æ€åŠ è½½çš„ã€‚

## ğŸ’» æ ¸å¿ƒè¯­è¨€çº¦æŸ

### 1. C++ Standard
- **Version**: **C++14** (Strict).
- **Rationale**: å…¼å®¹æ—§ç‰ˆç¼–è¯‘å™¨ä¸åµŒå…¥å¼å·¥å…·é“¾ã€‚
- **Forbidden**: `std::optional` (C++17), `std::variant` (C++17), `if constexpr`.

### 2. Exception Handling
- **Policy**: **NO EXCEPTIONS**.
- **Rationale**: åµŒå…¥å¼ç¯å¢ƒä¸æ”¯æŒ RTTI/Exceptionsï¼Œä¸”éœ€é¿å…ä¸å¯æ§çš„ Stack Unwindingã€‚
- **Pattern**: ä½¿ç”¨ `Result<T>` æˆ– `ErrorCode` ä¼ é€’é”™è¯¯ã€‚

## ğŸ“¦ ä¾èµ–ç®¡ç† (Dependency Management)

| ç±»åˆ« | å…è®¸ (Allowed) | ç¦æ­¢ (Forbidden) |
| :--- | :--- | :--- |
| **STL** | `vector`, `string`, `algorithm`, `memory` | `iostream` (Binary bloat), `thread` (Use Platform API) |
| **Platform** | `platform/inc/*.h` (JSON, XML, Zip) | é‡å¤å¼•å…¥åŠŸèƒ½ç›¸åŒçš„å¼€æºåº“ |
| **System** | ä»…é€šè¿‡ `infrastructure` å±‚é—´æ¥è°ƒç”¨ | ç›´æ¥åœ¨ä¸šåŠ¡å±‚è°ƒç”¨ `windows.h` / `pthread.h` |
| **External** | MIT/BSD License (éœ€å®¡æ ¸) | Boost (Bloat), GPL Libraries (Legal risk) |

## âœ… DO (æœ€ä½³å®è·µ)

```cpp
// 1. é”™è¯¯å¤„ç† (No Exceptions)
Result<int> Calculate(int input) {
    if (input < 0) return Result<int>::Failure(ErrorCode::InvalidParam);
    return Result<int>::Success(input * 2);
}

// 2. æ™ºèƒ½æŒ‡é’ˆ (C++14)
auto ptr = std::make_unique<MyClass>(); // Allowed
```

## âŒ DON'T (å¸¸è§é”™è¯¯)

```cpp
// 1. ä½¿ç”¨å¼‚å¸¸
int Calculate(int input) {
    if (input < 0) throw std::invalid_argument("Input < 0"); // âŒ CRASH: Exception disabled
    return input * 2;
}

// 2. å¼•å…¥ C++17 ç‰¹æ€§
if constexpr (true) { ... } // âŒ ç¼–è¯‘é”™è¯¯

// 3. æ»¥ç”¨ STL æµ
#include <iostream>
std::cout << "Log"; // âŒ ç¦æ­¢ï¼šä¼šå¯¼è‡´äºŒè¿›åˆ¶ä½“ç§¯å‰§å¢ï¼Œè¯·ç”¨ ILogger
```

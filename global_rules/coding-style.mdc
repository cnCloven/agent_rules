---
description: å¼ºåˆ¶æ‰§è¡Œ C++14 å’Œ Python ä»£ç è§„èŒƒã€å‘½åçº¦å®šåŠé”™è¯¯å¤„ç†æ¨¡å¼
globs: **/*.{h,hpp,c,cpp,cc,py}
alwaysApply: true
---

# ä»£ç é£æ ¼ä¸è§„èŒƒ (Coding Style Standards)

ç¼–å†™ C++ æˆ– Python ä»£ç æ—¶ï¼Œ**å¿…é¡»**éµå®ˆä»¥ä¸‹è§„åˆ™ã€‚

## ğŸš¨ æ ¸å¿ƒæ£€æŸ¥æ¸…å• (æäº¤å‰å¿…æŸ¥)

### é€šç”¨
- [ ] **å‘½å**ï¼šæ˜¯å¦ç¬¦åˆå¯¹åº”è¯­è¨€çš„å‘½åçº¦å®šï¼ˆè§ä¸‹è¡¨ï¼‰ï¼Ÿ
- [ ] **æ³¨é‡Š**ï¼šæ˜¯å¦è§£é‡Šäº†â€œä¸ºä»€ä¹ˆâ€è€Œéâ€œåšä»€ä¹ˆâ€ï¼Ÿ

### C++ ç‰¹å®š (æ ¸å¿ƒä¸šåŠ¡)
- [ ] **æ— å¼‚å¸¸**ï¼šç¡®è®¤æœªä½¿ç”¨ `try`, `catch`, `throw`ã€‚
- [ ] **å¤´æ–‡ä»¶**ï¼šç¡®è®¤æœªä½¿ç”¨ `using namespace`ï¼Œä¸”åŒ…å« `#pragma once`ã€‚
- [ ] **é”™è¯¯å¤„ç†**ï¼šç¡®è®¤æ£€æŸ¥äº†æ‰€æœ‰ `Result<T>` æˆ– `ErrorCode` è¿”å›å€¼ã€‚
- [ ] **å†…å­˜**ï¼šç¡®è®¤æœªä½¿ç”¨è£¸ `new`/`delete`ï¼ˆåº”ä½¿ç”¨ `std::unique_ptr`ï¼‰ã€‚

### Python ç‰¹å®š (å·¥å…·/è„šæœ¬)
- [ ] **PEP 8**ï¼šæ˜¯å¦ç¬¦åˆ PEP 8 é£æ ¼ï¼ˆç¼©è¿› 4 ç©ºæ ¼ï¼‰ã€‚
- [ ] **å¼‚å¸¸å¤„ç†**ï¼šè„šæœ¬å…¥å£æ˜¯å¦æ•è·äº†é¡¶å±‚å¼‚å¸¸ï¼Ÿ
- [ ] **ç±»å‹æç¤º**ï¼šå…³é”®æ¥å£æ˜¯å¦æœ‰ Type Hintsï¼Ÿ

---

## 1. å‘½åçº¦å®š (Naming Conventions)

| å…ƒç´  | C++ é£æ ¼ | C++ ç¤ºä¾‹ | Python é£æ ¼ | Python ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- | :--- |
| **ç±»/ç»“æ„ä½“** | PascalCase | `DiagnosticSession` | PascalCase | `DataParser` |
| **å‡½æ•°/æ–¹æ³•** | PascalCase | `StartRoutine` | snake_case | `parse_data` |
| **å˜é‡ (å±€éƒ¨)** | camelCase | `retryCount` | snake_case | `retry_count` |
| **å˜é‡ (æˆå‘˜)** | m_ + camelCase | `m_timeoutMs` | snake_case | `self.timeout_ms` |
| **å¸¸é‡** | kPascalCase | `kMaxRetryTimes` | UPPER_SNAKE | `MAX_RETRY_TIMES` |
| **æ¨¡å—/æ–‡ä»¶** | snake_case | `uds_service.cpp` | snake_case | `uds_tool.py` |

---

## 2. C++ è§„èŒƒ (C++14, No Exceptions)

### âœ… DO (æ­£ç¡®èŒƒä¾‹)

```cpp
// 1. ä½¿ç”¨ Result<T> æˆ– ErrorCode æ¨¡å¼ä»£æ›¿å¼‚å¸¸
enum class ErrorCode { Ok, Timeout, InternalError };

template <typename T>
struct Result {
    T value;
    ErrorCode error;
    bool isOk() const { return error == ErrorCode::Ok; }
};

// 2. ç«‹å³æ£€æŸ¥è¿”å›å€¼
auto result = transport->Send(data);
if (!result.isOk()) {
    return result.error;
}

// 3. ä½¿ç”¨ RAII ç®¡ç†èµ„æº
std::unique_ptr<Session> session = std::make_unique<Session>();
```

### âŒ DON'T (é”™è¯¯èŒƒä¾‹)

```cpp
// ğŸš« ç¦æ­¢ä½¿ç”¨å¼‚å¸¸
try {
    throw std::runtime_error("Error"); 
} catch (...) {}

// ğŸš« ç¦æ­¢å¿½ç•¥é”™è¯¯
transport->Send(data); // ç¼ºå°‘æ£€æŸ¥ï¼

// ğŸš« ç¦æ­¢è£¸æŒ‡é’ˆç®¡ç†æ‰€æœ‰æƒ
Session* session = new Session();
// ...
delete session; // å®¹æ˜“é—æ¼
```

---

## 3. Python è§„èŒƒ (Scripting/Tools)

### âœ… DO (æ­£ç¡®èŒƒä¾‹)

```python
# 1. ä½¿ç”¨ Type Hints
def calculate_checksum(data: bytes) -> int:
    return sum(data) % 256

# 2. é¡¶å±‚å¼‚å¸¸æ•è·
if __name__ == "__main__":
    try:
        main()
    except Exception as e:
        print(f"Critical error: {e}")
        sys.exit(1)
```

### âŒ DON'T (é”™è¯¯èŒƒä¾‹)

```python
# ğŸš« ç¦æ­¢è£¸ except
try:
    process()
except:  # æ•è·äº†æ‰€æœ‰ä¿¡å·ï¼ŒåŒ…æ‹¬ KeyboardInterrupt
    pass

# ğŸš« ç¦æ­¢æ— ç±»å‹æç¤ºçš„å¤æ‚é€»è¾‘
def process(data): # data æ˜¯ä»€ä¹ˆï¼Ÿ
    return data.magic()
```
